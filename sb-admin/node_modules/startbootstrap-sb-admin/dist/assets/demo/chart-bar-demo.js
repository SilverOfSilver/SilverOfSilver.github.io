// Set new default font family and font color to mimic Bootstrap's default styling
Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = '#292b2c';

async function getTagCnt(a) {
  let resp = await fetch(`https://cataas.com/api/cats?tags=${a}`);
  let lols = await resp.json();
  return lols.length;
}

async function makeData(a) {
  let data = [];
  for (let i = 0; i < 6; i++) {
    data[i] = await getTagCnt(a[i]);
  }
  return data;
}

let lbls = ["loaf", "warcat", "bigfloppa", "serious", "ugly", "summon"];

async function createChart() {
  let data = await makeData(lbls);
  let maxdata = 0;
  data.forEach(element => {
    if(element > maxdata){
      maxdata = element;
    }
  });

  // Bar Chart Example
  var ctx = document.getElementById("myBarChart");
  var myBarChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: lbls,
      datasets: [{
        label: "Count",
        backgroundColor: "rgba(2,117,216,1)",
        borderColor: "rgba(2,117,216,1)",
        data: data,
      }],
    },
    options: {
      scales: {
        xAxes: [{
          time: {
            unit: 'month'
          },
          gridLines: {
            display: false
          },
          ticks: {
            maxTicksLimit: 6
          }
        }],
        yAxes: [{
          ticks: {
            min: 0,
            max: maxdata,
            maxTicksLimit: 5
          },
          gridLines: {
            display: true
          }
        }],
      },
      legend: {
        display: false
      }
    }
  });
}
createChart();
